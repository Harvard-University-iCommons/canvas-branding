function isAddUserButtonPresent(){$btn=$("#right-side > div.rs-margin-bottom > a.add_user_link.Button.button-sidebar-wide");return $btn.length>0}function isAddCourseButtonPresent(){$btn=$("#right-side > div.rs-margin-bottom > a.add_course_link.Button.button-sidebar-wide");return $btn.length>0}function disableAddUserButton(){$("#right-side > div.rs-margin-bottom > a.add_user_link.Button.button-sidebar-wide").removeAttr("href").addClass("disabled")}function disableAddCourseButton(){$("#right-side > div.rs-margin-bottom > a.add_course_link.Button.button-sidebar-wide").removeAttr("href").addClass("disabled")}function initDisableAddUserCourse(){if($("body[class*=context-account_]")){if(isAddUserButtonPresent()){disableAddUserButton()}if(isAddCourseButtonPresent()){disableAddCourseButton()}}}$(document).ready(initDisableAddUserCourse);function addAnalyticsTextBlock(){var p=window.location.pathname.split("/");var resource=p[p.length-1];if(resource=="analytics"){var guidance_text='<div id="analytics-guidance" class="tlt-analytics-center-alert-info">'+'\t<div class="tlt-analytics-alert-info">'+"\t\tThe Faculty Oversight Committee on the Access to Electronic Information provides"+' \t\t<a href="https://wiki.harvard.edu/confluence/display/canvas/Electronic+Information+in+Canvas" target="_blank">'+" \t\t<strong>guidance to faculty</strong></a> on using these analytics."+"\t</div>"+"</div>";$(".course_graphs").before(guidance_text)}}function initAnalyticsTextBlock(){MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var analyticsObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if($("#analytics-guidance").length==0){var $target=$(mutation.target);if($target.find(".course_graphs").length!=0){addAnalyticsTextBlock();analyticsObserver.disconnect()}}})});var $config={childList:true,subtree:true,attributes:false,characterData:false};analyticsObserver.observe(document.body,$config)}$(document).ready(initAnalyticsTextBlock);function addCourseConcludeButtonDisabledMessage(){var msg="(Please contact your local academic support staff to conclude the course)";var $concludeButton=$("a[class~='Button'][href$='event=conclude']");$concludeButton.addClass("conclude_course_link");$concludeButton.append("<p><em>"+msg+"</em></p>")}function addCourseConcludeDateDisabledMessage(){var msg="(Please contact your local academic support staff to change the course conclude date)";if($("#course_conclude_at").closest("tr").find("p").length==0){$("#course_conclude_at").closest("tr").find("div.aside").after("<p><em>"+msg+"</em></p>")}}function addCourseUnconcludeButtonDisabledMessage(){var msg="(Please contact your local academic support staff to un-conclude this course)";var $unconcludeButton=$("form[action$='unconclude']").find("button");$unconcludeButton.addClass("unconclude_course_link");$unconcludeButton.append("<p><em>"+msg+"</em></p>")}function disableCourseConcludeButton(){var $concludeButton=$("a[class~='Button'][href$='event=conclude']");$concludeButton.attr("disabled",true)}function disableCourseUnconcludeButton(){var $unconcludeButton=$("form[action$='unconclude']").find("button");$unconcludeButton.attr("disabled",true)}function disableCourseConcludeDate(){var $concludeDateUIComponents=$("#course_conclude_at").closest("tr").find("div, i, input, button");$concludeDateUIComponents.addClass("selection-disabled").attr("disabled",true)}function isConcludeButtonPresent(){$concludeBtn=$("a[class~='Button'][href$='event=conclude']");if($concludeBtn.length>0)return true;return false}function initHUGlobal(){var reCourseSettingsPage=/courses\/.+?\/settings/;var windowUrl=window.location.pathname;var onCourseSettingsPage=windowUrl.search(reCourseSettingsPage)!=-1;if(onCourseSettingsPage){if(isConcludeButtonPresent()){disableCourseConcludeButton();addCourseConcludeButtonDisabledMessage()}else{disableCourseUnconcludeButton();addCourseUnconcludeButtonDisabledMessage()}var classAttrObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){var $target=$(mutation.target);if($target.not(".datepickerDisabled").hasClass("hasDatepicker")){$target.addClass("datepickerDisabled");disableCourseConcludeDate();addCourseConcludeDateDisabledMessage();classAttrObserver.disconnect()}})});var $content=$("#content");if($content.length>0){classAttrObserver.observe($content.get(0),{childList:true,subtree:true,attributes:true,characterData:false,attributeFilter:["class"]})}}}$(document).ready(initHUGlobal);function isResetCourseButtonPresent(){$resetBtn=$(".reset_course_content_button");return $resetBtn.length>0}function disableCourseResetButton(){$(".reset_course_content_button").removeAttr("href").addClass("disabled")}function initDisableCourseReset(){var reCourseSettingsPage=/courses\/.+?\/settings/;var windowUrl=window.location.pathname;var onCourseSettingsPage=windowUrl.search(reCourseSettingsPage)!=-1;if(onCourseSettingsPage&&isResetCourseButtonPresent()){disableCourseResetButton()}}$(document).ready(initDisableCourseReset);$(document).ready(function(e){$("select[name='enrollment_role_id'] option:contains('(0)')").remove()});$(document).ready(function(e){var harvardCopy="<div>Copyright &copy; 2017 The President and Fellows of Harvard College | "+'<a href="https://wiki.harvard.edu/confluence/display/canvas/Harvard+Privacy+Policy+for+Canvas" id="privacy_policy_link">Privacy Policy</a> | '+'<a href="https://wiki.harvard.edu/confluence/display/canvas/Harvard+Acceptable+Use+Policy+for+Canvas" id="acceptable_use_policy_link">Acceptable Use Policy</a>'+"</div>";$("footer").html(harvardCopy)});(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date;a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-49649810-4","auto");try{if(typeof ENV!=="undefined"){ga("set","dimension1",ENV.COURSE_ID);if(ENV.current_user_roles.indexOf("admin")!=-1){ga("set","dimension2","admin")}else if(ENV.current_user_roles.indexOf("teacher")!=-1){ga("set","dimension2","teacher")}else if(ENV.current_user_roles.indexOf("student")!=-1){ga("set","dimension2","student")}else{ga("set","dimension2","user")}}}catch(err){}ga("send","pageview");(function(){function onEditablePage(){return $("body").hasClass("syllabus")||$("body").hasClass("pages")}(function init(){if(onEditablePage()){var iframeResizerCDN="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.1/iframeResizer.min.js";var courseInfoObserver=new MutationObserver(function(mutations){var $widgets=$("div#content").find('iframe[title="Course Info"]');if($widgets.length>0){require(["jquery",iframeResizerCDN],function(){$widgets.iFrameResize();courseInfoObserver.disconnect()})}});var moConfig={childList:true,subtree:true};courseInfoObserver.observe(document.getElementById("content"),moConfig)}})()})();var huToolVisibilityRestricted=["A/B Testing Tool","Manage People","Manage Sections","Course Emailer","Import iSites Content","Manage Course"];function huFuzzyVisUpdate(tool){return $("div[id='left-side'] a[class^='context_external_tool']:contains('"+tool+"')").parent().addClass("section-tab-hidden")}function huExactVisUpdate(tool){return $("div[id='left-side'] a[class^='context_external_tool']").filter(function(){return $(this).text()===tool}).parent().addClass("section-tab-hidden")}function huUpdateCustomToolsVisibilityIndicator(toolList,exactMatch){var updateFunction=exactMatch===true?huExactVisUpdate:huFuzzyVisUpdate;$.each(toolList,function(index,tool){updateFunction(tool)})}$(document).ready(huUpdateCustomToolsVisibilityIndicator(huToolVisibilityRestricted));function sortTermDropdown(){var termSelect=$('select[name="enrollment_term_id"]');var selectedOption=$(termSelect).val();var termSelectList=$("option",termSelect);var re_letter=/^[A-Za-z]/;var re_number=/^[0-9]/;var topList=new Array;var middleList=new Array;var bottomList=new Array;for(var i=0;i<termSelectList.length;i++){if(termSelectList[i].label=="All Terms"){topList.unshift(termSelectList[i])}else if(termSelectList[i].label=="Ongoing"){topList.push(termSelectList[i])}else if(termSelectList[i].label.match(re_letter)){bottomList.push(termSelectList[i])}else{middleList.push(termSelectList[i])}}var newList=topList.concat(middleList.sort(function(a,b){return a.label>=b.label?-1:1}),bottomList.sort(function(a,b){return a.label>=b.label?1:-1}));$(termSelect).html(newList).val(selectedOption)}function sortTermTable(){var termRowList=$("table#terms tbody tr.term").get();var re_letter=/^[A-Za-z]/;var re_number=/^[0-9]/;var topList=new Array;var bottomList=new Array;for(var i=0;i<termRowList.length;i++){if(termRowList[i].getElementsByClassName("name")[0].innerHTML.match(re_number)){topList.push(termRowList[i])}else{bottomList.push(termRowList[i])}}var newList=topList.sort(function(a,b){var alabel=a.getElementsByClassName("name")[0].innerHTML;var blabel=b.getElementsByClassName("name")[0].innerHTML;return alabel>=blabel?-1:1}).concat(bottomList.sort(function(a,b){var alabel=a.getElementsByClassName("name")[0].innerHTML;var blabel=b.getElementsByClassName("name")[0].innerHTML;return alabel>=blabel?1:-1}));$("table#terms").children("tbody").append(newList)}$(document).ready(function(){if($('select[name="enrollment_term_id"]').length>0){sortTermDropdown()}if($("table#terms").length>0){sortTermTable()}});require(["jquery"],function($){function is_course_page(){return/^\/courses\/\d+/.test(window.location.pathname)}function modify_unauthorized_message(msg){var $holder=$("#unauthorized_holder");if($holder.length>0){$holder.find("h2").html(msg.title);$holder.find("p").replaceWith(msg.content);$holder.find("p:first").css({paddingBottom:0})}}if(is_course_page()){modify_unauthorized_message({title:"Not Available",content:'<p>You do not currently have access to view this page. It may be that the site has not yet been published by the teaching staff, or that access to the site is restricted.</p><p>If you think you should have access, please use the "Help" link to contact support.</p>'})}});
